const sharp=require("sharp"),fs=require("fs"),path=require("path"),inputDir=path.resolve("optimized/images");fs.existsSync(inputDir)||process.exit(0);const sizes=[320,640,1024,1920];fs.readdirSync(inputDir).forEach(e=>{const i=path.extname(e).toLowerCase();if(![".jpg",".jpeg",".png"].includes(i))return;const s=path.basename(e,i);sizes.forEach(t=>{const r=path.join(inputDir,`${t}w`);fs.existsSync(r)||fs.mkdirSync(r,{recursive:!0}),sharp(path.join(inputDir,e)).resize(t).toFile(path.join(r,`${s}_${t}w${i}`)).then(()=>{}).catch(e=>{})})});